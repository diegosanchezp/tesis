{% extends 'base.html' %}
{% load django_vite slippers %}

{% comment %}
Edit student profile

{% endcomment %}

{% block extrascripts %}
    {% vite_asset 'js/htmx.ts' %}
    {% vite_asset 'js/profile_student.ts' %}
{% endblock %}


{% block title %}
Editar perfil - Studiante
{% endblock title %}

{% block body %}

{% include "components/navbar.html" %}

<main class="page-x-spacing">
    <section id="quicklinks" class="flex gap-x-2 mt-4">
        <a href="#career-form">
            {% #button icon_right="bi bi-arrow-right"%}
                Cambiar carrera
            {% /button %}
        </a>
        <a href="#change-specialization">
            {% #button icon_right="bi bi-arrow-right"%}
                Cambiar especialización
            {% /button %}
        </a>
        <a href="#">
            {% #button icon_right="bi bi-arrow-right"%}
                Cambiar temas de interés
            {% /button %}
        </a>
    </section>


    <section id="profile-form-section" class="{% include "student/profile/container_styles.html" %}">
        {% include "student/profile/h2.html" with text="Perfil" %}
        {% include "customauth/profile_form.html" %}
    </section>


    <section id="change-password-section" class="{% include "student/profile/container_styles.html" %}">
        {% include "student/profile/h2.html" with text="Cambiar contraseña" %}
        {% include "customauth/change_password.html" %}
    </section>


    {# Render the section to select the academic career #}
    {% include "main/career/change_career.html" with entity=student %}


    {% block change_specialization %}
    <section id="change-specialization" class="{% include "student/profile/container_styles.html" %}">
        {% include "student/profile/h2.html" with text="Especialización" %}

        <p class="mb-2 text-sm font-medium text-gray-900">Especialización seleccionada</p>
        <div class="flex gap-x-2 items-center">
            {% if student.specialization %}
                <div class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                    {{ student.specialization.name }}
                </div>
            {% else %}
                <p>No haz seleccionado Especialización</p>
            {% endif %}

            <div onclick="getSpecModal('{{ student.carreer.pk }}')">
                {% #button icon_right="bi bi-pencil" type="button" %}
                    {% if student.specialization %}
                        Cambiar
                    {% else %}
                        Seleccionar
                    {% endif %}
                {% /button %}
            </div>
        </div>

        <!-- Container of the career selector modal -->
        <div id="modal-change-specialization-container" tabindex="-1" aria-hidden="true" class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-40 bg-gray-900 bg-opacity-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
        </div>
    </section>
    {% endblock change_specialization %}
</main>
{% endblock %}
